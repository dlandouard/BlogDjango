{% extends "blog/base.html" %}
   {% block title %}{{ post.title }}{% endblock %}
   {% block content %}
     <h1>{{ post.title }}</h1>
     <p class="date">
       Publié le {{ post.publish }} par {{ post.author }}
     </p>
     {{ post.body|linebreaks }}
     <p>
      <a href="{% url "blog:post_share" post.id %}">
       Partager ce post
      </a>
     </p>
     {% with comments.count as total_comments %}
      <h2>
        {{ total_comments }} commentaire{{ total_comments|pluralize }}
      </h2>
     {% endwith %}
     {% for comment in comments %}
     <div class="comment">
       <p class="info">
         Commentaire {{ forloop.counter }} par {{ comment.name }}
         {{ comment.created }}
       </p>
       {{ comment.body|linebreaks }}
     </div>
      {% empty %}
      <p>Il n'y a pas encore de commentaire.</p>
    {% endfor %}
    {% if new_comment %}
      <h2>Votre commentaire a été ajouté.</h2>
      {% else %}
        <h2>Nouveau commentaire</h2>
        <form method="post">
          {{ comment_form.as_p }}
          {% csrf_token %}
          <p><input type="submit" value="Commenter"></p>
        </form>
    {% endif %}
   {% endblock %}